<UserControl x:Class="Monahrq.Websites.Views.WebsiteSettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:model="clr-namespace:Monahrq.Websites.ViewModels"
             xmlns:Controls="clr-namespace:MahApps.Metro.Controls;assembly=MahApps.Metro"
             xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             xmlns:local="clr-namespace:Monahrq.Theme.Behaviors;assembly=Monahrq.Theme"
             xmlns:themeconverters="clr-namespace:Monahrq.Theme.Converters;assembly=Monahrq.Theme"
             xmlns:componentModel="clr-namespace:System.ComponentModel;assembly=WindowsBase"
             xmlns:converters="clr-namespace:Monahrq.Websites.Converters"
             xmlns:otherConverters="clr-namespace:Monahrq.Theme.Converters;assembly=Monahrq.Theme"
             xmlns:controls="clr-namespace:Monahrq.Theme.Controls;assembly=Monahrq.Theme"
             xmlns:validation="clr-namespace:Monahrq.Infrastructure.Validation;assembly=Monahrq.Infrastructure"
             xmlns:views="clr-namespace:Monahrq.Websites.Views"
             xmlns:ns="clr-namespace:Monahrq.Websites.Helpers"
             xmlns:prism="clr-namespace:Microsoft.Practices.Prism.Regions;assembly=Microsoft.Practices.Prism"
             xmlns:MonahrqRegions="clr-namespace:Monahrq.Sdk.Regions;assembly=Monahrq.Infrastructure"
             xmlns:viewModel="clr-namespace:Monahrq.Websites.ViewModels"
             xmlns:multiSelect="clr-namespace:Monahrq.Theme.Controls.MultiSelect;assembly=Monahrq.Theme"
             mc:Ignorable="d"
             d:DesignHeight="800"
             d:DesignWidth="1600">
    <!--d:DataContext="{d:DesignInstance model:WebsiteSettingsViewModel}"-->
    <UserControl.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/Monahrq.Theme;component/Styles/Monahrq.Buttons.xaml" />
                <ResourceDictionary Source="/Monahrq.Theme;component/Styles/Monahrq.DataGrid.xaml" />
                <!--<ResourceDictionary Source="/Monahrq.Theme;component/Styles/ControlValidationStyle.xaml" />-->
            </ResourceDictionary.MergedDictionaries>
            <themeconverters:ExpandAllMultiConverter x:Key="ExpandAllMultiConverter" />
            <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
            <otherConverters:InvertedBooleanConverter x:Key="InvertedBooleanConverter" />
            <converters:TextToFontFamilyConverter x:Key="TextToFontFamilyConverter" />
            <otherConverters:EnumToValueConverter x:Key="EnumToValueConverter" />
            <views:PreviewButtonConverter x:Key="PreviewButtonConverter" />
            <views:MenuGridVisibility x:Key="MenuGridVisibility" />
            <views:MenuGridWidth x:Key="MenuGridWidth" />

            <Style TargetType="{x:Type TextBox}"
                   x:Key="StyleOverrideErrorTemplate">
                <Style.Triggers>
                    <Trigger Property="Validation.HasError"
                             Value="True">
                        <Setter Property="ToolTip"
                                Value="{x:Null}" />
                    </Trigger>
                </Style.Triggers>
            </Style>
            <Style TargetType="{x:Type Label}"
                   x:Key="StyleErrorLabel">
                <Setter Property="Foreground"
                        Value="Red" />
                <Setter Property="FontSize"
                        Value="12" />
                <Setter Property="Margin" Value="0,0,0,0" />
                <Setter Property="Padding" Value="2"/>
                <Style.Triggers>
                    <Trigger Property="Content"
                             Value="{x:Null}">
                        <Setter Property="Visibility"
                                Value="Collapsed" />
                    </Trigger>
                </Style.Triggers>
            </Style>
        </ResourceDictionary>
    </UserControl.Resources>
    <UserControl.CommandBindings>
        <CommandBinding Command="ApplicationCommands.SelectAll"
                        Executed="SelectAllExecuted" />
    </UserControl.CommandBindings>
    <Grid x:Name="LayoutRoot"
          Background="{DynamicResource MGrey2}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>
        <!--<StackPanel Grid.Row="0"
                    Margin="0,0,-1,0"
                    Background="{StaticResource MGrey2}">
            <Label Style="{StaticResource StyleErrorLabel}"
                   Content="{Binding ElementName=TextBoxGeographicDescription, Path=(Validation.Errors)[0].ErrorContent}" />
            <Label Style="{StaticResource StyleErrorLabel}"
                   Content="{Binding ElementName=_cmbSelectRadius, Path=(Validation.Errors)[0].ErrorContent}" />
            <Label Style="{StaticResource StyleErrorLabel}"
                   Content="{Binding ElementName=TextBoxOutputDirectoryPath, Path=(Validation.Errors)[0].ErrorContent}" />
            <Label Style="{StaticResource StyleErrorLabel}"
                   Content="{Binding ElementName=TextBoxFeedBackEmail, Path=(Validation.Errors)[0].ErrorContent}" />
            <Label Style="{StaticResource StyleErrorLabel}"
                   Content="{Binding ElementName=TextBoxHeaderTitle, Path=(Validation.Errors)[0].ErrorContent}" />
            <Label Style="{StaticResource StyleErrorLabel}"
                   Content="{Binding ElementName=TextBannerImage, Path=(Validation.Errors)[0].ErrorContent}" />
            <Label Style="{StaticResource StyleErrorLabel}"
                   Content="{Binding ElementName=txtbxWebsiteBrowserTitle, Path=(Validation.Errors)[0].ErrorContent}" />
        </StackPanel>-->
        <Border Margin="0,0,-1,0"
                Background="{StaticResource MGrey2}"
                Padding="20,10"
                Grid.Row="1">
            <TabControl Style="{StaticResource TabControlStyleLeft}">
                <TabItem Header="Website Content"
                         Name="Tab_WebsiteContent"
                         Tag="{Binding WebsiteContentHasErrors, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource TabItemStyleLeftValidation}">
                    <Border BorderBrush="{DynamicResource MBlue}"
                            BorderThickness="0,1,0,0"
                            Margin="-1,0,0,0"
                            Padding="0,10">
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="79*" />
                                <ColumnDefinition Width="699*" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="*" />
                            </Grid.RowDefinitions>
                            <StackPanel Grid.Row="0"
                                        Background="{StaticResource MGrey2}"
                                        Grid.ColumnSpan="2">
                                <Label Style="{StaticResource StyleErrorLabel}"
                                       Content="{Binding ElementName=TextBoxGeographicDescription, Path=(Validation.Errors)[0].ErrorContent}" />
                                <Label Style="{StaticResource StyleErrorLabel}" 
                                       Content="{Binding ElementName=_cmbSelectRadius, Path=(Validation.Errors)[0].ErrorContent}" />
                                <Label Style="{StaticResource StyleErrorLabel}"
                                       Content="{Binding ElementName=TextBoxOutputDirectoryPath, Path=(Validation.Errors)[0].ErrorContent}" />
                                <Label Style="{StaticResource StyleErrorLabel}"
                                       Content="{Binding ElementName=TextBoxFeedBackEmail, Path=(Validation.Errors)[0].ErrorContent}" />
                                <Label Style="{StaticResource StyleErrorLabel}"
                                       Content="{Binding ElementName=txtbxWebsiteBrowserTitle, Path=(Validation.Errors)[0].ErrorContent}" />
                            </StackPanel>

                            <StackPanel Grid.Row="1"
                                  Grid.ColumnSpan="2"
                                        Margin="0,0,0,25">
                                <Grid x:Name="top_header_panel_left">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <StackPanel Margin="0,-1,0,0"
                                            Grid.ColumnSpan="2">
                                    <TextBlock Text="Website Content"
                                               Style="{DynamicResource Header3}" />
                                    <TextBlock Text="Please fill out the fields below in order to customize your website. "
                                               TextWrapping="Wrap"
                                               Style="{DynamicResource Subtopic}" />
                                    <TextBlock Text="Click the subsections below to expand them for editing"
                                               TextWrapping="Wrap"
                                               Style="{DynamicResource Subtopic}" />
                                </StackPanel>
                                <StackPanel Grid.Column="1"
                                            VerticalAlignment="Bottom"
                                            HorizontalAlignment="Right"
                                            Background="{DynamicResource MGrey2}"
                                            Margin="0,-1,0,0">
                                    <CheckBox x:Name="ChkExpandContent"
                                              FontSize="10"
                                              Click="OnContentExpandAllSelectionChanged"
                                              Content="EXPAND ALL"
                                              Foreground="{DynamicResource MGrey4}"
                                              HorizontalAlignment="Left">
                                        <CheckBox.ToolTip>
                                            <TextBlock Style="{x:Null}"
                                                       Text="Checking this box causes all items in the details panel to be expanded. This box becomes unchecked if any of the child expanders are collapsed." />
                                        </CheckBox.ToolTip>
                                        <!--<CheckBox.IsChecked>
                                            <MultiBinding Mode="TwoWay"
                                                          Converter="{StaticResource ExpandAllMultiConverter}">
                                                <Binding ElementName="SelectHospitalExpander"
                                                         Path="IsExpanded" />
                                                <Binding ElementName="SelectZipcodeRadaiiGeoDescriptionExpander"
                                                         Path="IsExpanded" />
                                                <Binding ElementName="AboutUsExpander"
                                                         Path="IsExpanded" />
                                                <Binding ElementName="FeedBackExpander"
                                                         Path="IsExpanded" />
                                                <Binding ElementName="SeoAnalyticsAndMappingExpander"
                                                         Path="IsExpanded" />
                                                <Binding ElementName="OutPutFolderExpander"
                                                         Path="IsExpanded" />
                                            </MultiBinding>
                                        </CheckBox.IsChecked>-->
                                    </CheckBox>
                                </StackPanel>
                            </Grid>
                            </StackPanel>

                            <ScrollViewer Grid.Row="1"
                                          Grid.Column="0"
                                          Grid.ColumnSpan="2"
                                          Grid.RowSpan="2"
                                          Margin="5,77,5,5"
                                          HorizontalAlignment="Stretch">
                                <Grid>
                                    <Grid.ColumnDefinitions>
                                        <ColumnDefinition Width="0.5*" />
                                        <ColumnDefinition Width="10" />
                                        <ColumnDefinition Width="0.5*" />
                                    </Grid.ColumnDefinitions>
                                    <Grid.RowDefinitions>
                                        <RowDefinition />
                                    </Grid.RowDefinitions>

                                    <StackPanel Grid.Row="0"
                                                Grid.Column="0"
                                                Orientation="Vertical">
                                        <Expander x:Name="OutPutFolderExpander"
                                                  Header="Output Folder"
                                                  d:LayoutOverrides="Width"
                                                  Grid.Row="0"
                                                  Grid.Column="0">
                                            <Grid Background="#FFE5E5E5">
                                                <Border BorderBrush="{DynamicResource MGrey2}"
                                                        BorderThickness="1"
                                                        Background="{DynamicResource MGrey1}"
                                                        Padding="5">
                                                    <StackPanel Orientation="Vertical">
                                                        <TextBlock Text="Output Folder:"
                                                                   Margin="5" />
                                                        <Grid>
                                                            <Grid.ColumnDefinitions>
                                                                <ColumnDefinition Width="248*" />
                                                                <ColumnDefinition Width="57*" />
                                                                <ColumnDefinition Width="100" />
                                                            </Grid.ColumnDefinitions>
                                                            <TextBox Grid.Column="0"
                                                                     Height="30"
                                                                     Name="TextBoxOutputDirectoryPath"
                                                                     Controls:TextboxHelper.Watermark="Select Output Directory"
                                                                     Style="{StaticResource StyleOverrideErrorTemplate}"
                                                                     Margin="5"
                                                                     Width="Auto"
                                                                     Background="{DynamicResource MGrey1}"
                                                                     FontSize="14"
                                                                     Foreground="{DynamicResource MGrey5}"
                                                                     Text="{Binding OutputDirectoryPath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                                     Grid.ColumnSpan="2">
                                                                <TextBox.Triggers>
                                                                    <EventTrigger RoutedEvent="GotFocus">
                                                                        <EventTrigger.Actions>
                                                                            <BeginStoryboard>
                                                                                <Storyboard>
                                                                                    <BooleanAnimationUsingKeyFrames Storyboard.TargetName="TextBoxOutputDirectoryPath"
                                                                                                                    Storyboard.TargetProperty="IsEnabled">
                                                                                        <DiscreteBooleanKeyFrame KeyTime="00:00:00"
                                                                                                                 Value="False" />
                                                                                    </BooleanAnimationUsingKeyFrames>
                                                                                </Storyboard>
                                                                            </BeginStoryboard>
                                                                        </EventTrigger.Actions>
                                                                    </EventTrigger>
                                                                    <EventTrigger RoutedEvent="LostFocus">
                                                                        <BeginStoryboard>
                                                                            <Storyboard>
                                                                                <BooleanAnimationUsingKeyFrames Storyboard.TargetName="TextBoxOutputDirectoryPath"
                                                                                                                Storyboard.TargetProperty="IsEnabled">
                                                                                    <DiscreteBooleanKeyFrame KeyTime="00:00:00"
                                                                                                             Value="True" />
                                                                                </BooleanAnimationUsingKeyFrames>
                                                                            </Storyboard>
                                                                        </BeginStoryboard>
                                                                    </EventTrigger>
                                                                </TextBox.Triggers>
                                                                <i:Interaction.Triggers>
                                                                    <i:EventTrigger EventName="GotFocus">
                                                                        <i:InvokeCommandAction Command="{Binding SelectDirectoryCommand}" />
                                                                    </i:EventTrigger>
                                                                </i:Interaction.Triggers>
                                                            </TextBox>
                                                            <Button Grid.Column="2"
                                                                    Command="{Binding SelectDirectoryCommand}"
                                                                    Foreground="White"
                                                                    Background="{DynamicResource MBlue}"
                                                                    BorderBrush="{x:Null}"
                                                                    Padding="5,0,5,0"
                                                                    Margin="7,5,13,5"
                                                                    Width="80"
                                                                    Content="BROWSE" />
                                                        </Grid>
                                                    </StackPanel>
                                                </Border>
                                            </Grid>
                                        </Expander>

                                        <Expander Grid.Row="1"
                                                  Grid.Column="0"
                                                  x:Name="SelectZipcodeRadaiiGeoDescriptionExpander"
                                                  Header="Website Report Zip code search radii selection and Geographic Description"
                                                  d:LayoutOverrides="Width">
                                            <Grid Background="#FFE5E5E5">
                                                <Border BorderBrush="{DynamicResource MGrey2}"
                                                        BorderThickness="1"
                                                        Background="{StaticResource MGrey1}"
                                                        Padding="5">
                                                    <Grid>
                                                        <StackPanel>
                                                            <Grid Margin="0,10,0,0"
                                                                  HorizontalAlignment="Stretch">
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition />
                                                                    <RowDefinition />
                                                                </Grid.RowDefinitions>
                                                                <StackPanel Grid.Row="0">
                                                                  
                                                                    <TextBlock Text="Select search radii options that website users will use to search for hospitals (distances listed are in miles):"
                                                                               Margin="5"
                                                                               HorizontalAlignment="Stretch"
                                                                               TextWrapping="Wrap" />
                                                                    <Button 
                                                                        x:Name="SelectAllButton"
                                                                        HorizontalAlignment="Left"
                                                                            Content="{Binding RadiusSelectionButtonContent}"
                                                                            Command="{Binding RadiusSelectionCommand}"
                                                                            CommandParameter="{Binding RadiusSelectionButtonContent }"
                                                                            Margin="0,5,5,5"
                                                                            Background="{StaticResource MBlue}"
                                                                            BorderBrush="{x:Null}"
                                                                            Width="100"
                                                                            Height="20"
                                                                            Foreground="White"
                                                                            />
                                                                    <ListBox x:Name="_cmbSelectRadius"
                                                                             BorderThickness="2"
                                                                             ItemsSource="{Binding ApplicableRadiusMiles}" 
                                                                             SelectionMode="Multiple" 
                                                                    SelectedValuePath="Value" 
                                                                        DisplayMemberPath="Text"
                                                                        Height="80"
                                                                             FontSize="14" 
                                                                             Margin="5,5,5,5"
                                                                             HorizontalAlignment="Stretch">
                                                                        <ListBox.InputBindings>
                                                                            <KeyBinding Command="ApplicationCommands.SelectAll"
				                                                                        	Modifiers="Ctrl"
					                                                                        Key="A" />
                                                                        </ListBox.InputBindings> 
                                                                        <i:Interaction.Triggers>
                                                                            <i:EventTrigger EventName="SelectionChanged">
                                                                                <i:InvokeCommandAction Command="{Binding ZipcodeListBoxItemsSelectionChangedCommand}"
                                                                                    CommandParameter="{Binding ElementName=_cmbSelectRadius, Path=SelectedItems}"/>
                                                                            </i:EventTrigger>
                                                                        </i:Interaction.Triggers>
                                                                        <ListBox.ItemContainerStyle>
                                                                            <Style TargetType="{x:Type ListBoxItem}">
                                                                                <Setter Property="IsSelected" Value="{Binding Mode=TwoWay, Path=IsSelected}"/>
                                                                                <Setter Property="FocusVisualStyle" Value="{x:Null}" />
                                                                                <Style.Triggers>
                                                                                    <Trigger Property="IsSelected" Value="True">
                                                                                        <Setter Property="FocusManager.FocusedElement" Value="{Binding RelativeSource={RelativeSource Self}}" />
                                                                                    </Trigger>
                                                                                </Style.Triggers>
                                                                            </Style>
                                                                        </ListBox.ItemContainerStyle>
                                                                    </ListBox>
                                                                </StackPanel>
                                                                
                                                                <StackPanel Grid.Row="1">
                                                                    <TextBlock Text="Geographic Description:"
                                                                               Margin="5"
                                                                               HorizontalAlignment="Stretch" />
                                                                    <TextBox x:Name="TextBoxGeographicDescription"
                                                                             BorderThickness="2"
                                                                             Style="{StaticResource StyleOverrideErrorTemplate}"
                                                                             Margin="5,5,5,5"
                                                                             Background="{StaticResource MGrey1}"
                                                                             FontSize="14"
                                                                             HorizontalAlignment="Stretch"
                                                                             AcceptsReturn="True"
                                                                             VerticalAlignment="Stretch"
                                                                             TextWrapping="Wrap"
                                                                             MaxLines="100"
                                                                             Text="{Binding CurrentWebsite.GeographicDescription, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                                             Controls:TextboxHelper.Watermark="For e.g. &quot;In My State&quot;"/>
                                                                </StackPanel>
                                                            </Grid>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </Grid>
                                        </Expander>

                                        <Expander Grid.Row="2"
                                                  Grid.Column="0"
                                                  x:Name="SelectHospitalExpander"
                                                  Header="Included Hospitals and Nursing Homes"
                                                  d:LayoutOverrides="Width">
                                            <Grid Background="#FFE5E5E5">
                                                <Border BorderBrush="{DynamicResource MGrey2}"
                                                        BorderThickness="1"
                                                        Background="{StaticResource MGrey1}"
                                                        Padding="5">
                                                    <StackPanel Margin="5,5,5,5"
                                                                HorizontalAlignment="Left"
                                                                Orientation="Horizontal">
                                                        <Button Margin="5"
                                                                Style="{StaticResource PlainButton}"
                                                                Background="{StaticResource MDBlue}"
                                                                Content="View and change Hospitals"
                                                                IsEnabled="{Binding EnableHospitalSectionLink}"
                                                                Command="{Binding OpenHospitalSelectionCommand}"
                                                                Foreground="White"
                                                                Padding="5,5"
                                                                ScrollViewer.VerticalScrollBarVisibility="Disabled" />

                                                        <Button Margin="5"
                                                                Style="{StaticResource PlainButton}"
                                                                Background="{StaticResource MDBlue}"
                                                                Content="View and change Nursing Homes"
                                                                IsEnabled="{Binding EnableHospitalSectionLink}"
                                                                Command="{Binding OpenNursingHomeSelectionCommand}"
                                                                Foreground="White"
                                                                Padding="5,5"
                                                                ScrollViewer.VerticalScrollBarVisibility="Disabled" />
                                                    </StackPanel>

                                                </Border>
                                            </Grid>
                                        </Expander>

                                        <Expander Grid.Row="3"
                                                  Grid.Column="0"
                                                  x:Name="GuideToolExpander"
                                                  Header="Step-by-Step Guide"
                                                  d:LayoutOverrides="Width">
                                            <Grid Background="#FFE5E5E5">
                                                <Border BorderBrush="{DynamicResource MGrey2}"
                                                        BorderThickness="1"
                                                        Background="{StaticResource MGrey1}"
                                                        Padding="5">
                                                    <StackPanel Margin="5,5,5,5"
                                                                HorizontalAlignment="Left"
                                                                Orientation="Horizontal">
                                                        <CheckBox Content="Enable Step-by-Step guide on the website (only avaialbe for the consumer version)"
                                                                  IsChecked="{Binding CurrentWebsite.IncludeGuideToolInYourWebsite, Mode=TwoWay}" />
                                                    </StackPanel>

                                                </Border>
                                            </Grid>
                                            
                                        </Expander>


                                    </StackPanel>

                                    <StackPanel Grid.Row="1"
                                                Grid.Column="2"
                                                Orientation="Vertical">

                                        <Expander Grid.Row="0"
                                                  Grid.Column="2"
                                                  x:Name="AboutUsExpander"
                                                  Header="About Us"
                                                  d:LayoutOverrides="Width">
                                            <Grid Background="#FFE5E5E5">
                                                <Border BorderBrush="{DynamicResource MGrey2}"
                                                        BorderThickness="1"
                                                        Background="{DynamicResource MGrey1}"
                                                        Padding="5">
                                                    <Grid>
                                                        <StackPanel Orientation="Vertical">

                                                            <TextBlock x:Name="_lbl_1_briefSummaryOfTheWebsites"
                                                                       TextWrapping="Wrap"
                                                                       Text="Please provide a brief summary for your organization or website. This will appear in the footer of the generated website homepage"
                                                                       Margin="5" />
                                                            <TextBox x:Name="txtbxAboutUsSectionSummary"
                                                                     Text="{Binding Path=CurrentWebsite.AboutUsSectionSummary, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                     MaxLines="10"
                                                                     AcceptsReturn="True"
                                                                     TextWrapping="Wrap"
                                                                     Height="75"
                                                                     Controls:TextboxHelper.Watermark="Enter a Description :"
                                                                     Background="{DynamicResource MGrey1}"
                                                                     FontSize="14"
                                                                     Foreground="{DynamicResource MGrey5}"
                                                                     MaxLength="500" />
                                                            <TextBlock TextWrapping="Wrap">
                                                                <TextBlock.Inlines>
                                                                    <Bold>About Section:</Bold>
                                                                    <Span>Please provide the text that will appear in the About Us section of your website.</Span>
                                                                </TextBlock.Inlines>
                                                            </TextBlock>
                                                            <TextBox x:Name="txtbxAboutUsSectionText"
                                                                     Text="{Binding Path=CurrentWebsite.AboutUsSectionText, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                     MaxLines="20"
                                                                     AcceptsReturn="True"
                                                                     TextWrapping="Wrap"
                                                                     Controls:TextboxHelper.Watermark="About us Content :"
                                                                     Height="100"
                                                                     Background="{DynamicResource MGrey1}"
                                                                     FontSize="14"
                                                                     Foreground="{DynamicResource MGrey5}"
                                                                     MaxLength="4000" />
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </Grid>
                                        </Expander>

                                        <Expander Grid.Row="1"
                                                  Grid.Column="2"
                                                  x:Name="FeedBackExpander"
                                                  Header="Feedback Topics"
                                                  d:LayoutOverrides="Width">
                                            <Grid Background="#FFE5E5E5">
                                                <Border BorderBrush="{DynamicResource MGrey2}"
                                                        BorderThickness="1"
                                                        Background="{DynamicResource MGrey1}"
                                                        Padding="5">
                                                    <Grid>
                                                        <Grid.RowDefinitions>
                                                            <RowDefinition />
                                                            <RowDefinition />
                                                        </Grid.RowDefinitions>
                                                        <StackPanel>
                                                            <CheckBox Content="Include feedback form in your website"
                                                                      Name="ckBoxFeedbackFormIncluded"
                                                                      IsChecked="{Binding CurrentWebsite.IncludeFeedbackFormInYourWebsite, Mode=TwoWay}" />
                                                            <StackPanel Margin="20,5,0,0"
                                                                        Orientation="Horizontal">
                                                                <RadioButton GroupName="rbtnFeedbackSource"
                                                                             Name="rdbStandardFeedBack"
                                                                             Content="Standard feedback form"
                                                                             VerticalAlignment="Center"
                                                                             IsChecked="{Binding CurrentWebsite.IsStandardFeedbackForm, Mode=TwoWay}"
                                                                             IsEnabled="{Binding CurrentWebsite.IncludeFeedbackFormInYourWebsite}" />
                                                                <Button Margin="65,0,0,5"
                                                                        Width="70"
                                                                        Content="Preview"
                                                                        Background="Azure"
                                                                        Command="{Binding PreviewStandadFeedbackFormCommand}">
                                                                    <Button.IsEnabled>
                                                                        <MultiBinding Converter="{StaticResource PreviewButtonConverter}">
                                                                            <Binding ElementName="rdbStandardFeedBack"
                                                                                     Path="IsChecked" />
                                                                            <Binding ElementName="ckBoxFeedbackFormIncluded"
                                                                                     Path="IsChecked" />
                                                                        </MultiBinding>
                                                                    </Button.IsEnabled>
                                                                </Button>
                                                            </StackPanel>
                                                            <StackPanel Margin="20,5,0,0"
                                                                        Orientation="Horizontal">
                                                                <RadioButton GroupName="rbtnFeedbackSource"
                                                                             Content="Link to your online feedback form"
                                                                             VerticalAlignment="Center"
                                                                             IsChecked="{Binding IsCustomFeedbackFormSelected, Mode=TwoWay}"
                                                                             IsEnabled="{Binding CurrentWebsite.IncludeFeedbackFormInYourWebsite}" />
                                                                <TextBox Margin="15,0,0,5"
                                                                         Width="150"
                                                                         IsEnabled="{Binding IsCustomFeedbackFormSelected}"
                                                                         Text="{Binding CurrentWebsite.CustomFeedbackFormUrl, Mode=TwoWay}"></TextBox>
                                                            </StackPanel>
                                                        </StackPanel>
                                                        <StackPanel Grid.Row="1"
                                                                    Orientation="Vertical">
                                                            <TextBlock Text="Feedback Recipient Email address "
                                                                       Margin="5" />
                                                            <TextBox Height="30"
                                                                     FontSize="14"
                                                                     Foreground="{DynamicResource MGrey5}"
                                                                     Name="TextBoxFeedBackEmail"
                                                                     Text="{Binding FeedBackEmailTemp, Mode=TwoWay, UpdateSourceTrigger=LostFocus, ValidatesOnNotifyDataErrors=True, ValidatesOnDataErrors=True}"
                                                                     MaxLength="150"
                                                                     Margin="5"
                                                                     Width="Auto"
                                                                     Style="{StaticResource StyleOverrideErrorTemplate}"
                                                                     Background="{DynamicResource MGrey1}" />
                                                            <TextBlock Text="Specify helpful topics that your users can contact you about?"
                                                                       Margin="5" />
                                                            <Grid Margin="5">
                                                                <Grid.ColumnDefinitions>
                                                                    <ColumnDefinition Width="*" />
                                                                    <ColumnDefinition Width="100" />
                                                                </Grid.ColumnDefinitions>
                                                                <Grid.RowDefinitions>
                                                                    <RowDefinition Height="40" />
                                                                    <RowDefinition Height="*" />
                                                                </Grid.RowDefinitions>
                                                                <TextBox x:Name="txtBxTopic"
                                                                         Grid.Column="0"
                                                                         Grid.Row="0"
                                                                         Margin="5"
                                                                         Background="{DynamicResource MGrey1}"
                                                                         FontSize="14"
                                                                         Controls:TextboxHelper.Watermark="Please enter a feedback topic"
                                                                         Foreground="{DynamicResource MGrey5}"
                                                                         MaxLength="100" />
                                                                <Button Grid.Column="1"
                                                                        Grid.Row="0"
                                                                        Content="ADD TOPIC"
                                                                        Style="{DynamicResource PlainButton}"
                                                                        Command="{Binding AddFeedBackTopic}"
                                                                        Margin="5"
                                                                        CommandParameter="{Binding ElementName=txtBxTopic,Path=Text}" />
                                                                <ListView x:Name="AddedTopics"
                                                                          ItemsSource="{Binding FeedbackTopics}"
                                                                          Margin="5"
                                                                          Grid.Row="1"
                                                                          Grid.ColumnSpan="2">
                                                                    <ListView.ItemTemplate>
                                                                        <DataTemplate>
                                                                            <Grid Margin="5 0 0 0">
                                                                                <Grid.ColumnDefinitions>
                                                                                    <ColumnDefinition Width="*" />
                                                                                    <ColumnDefinition Width="70" />
                                                                                </Grid.ColumnDefinitions>
                                                                                <TextBlock Grid.Column="0"
                                                                                           Text="{Binding}" />
                                                                                <Button Command="{Binding DataContext.RemoveFeedBackTopic, RelativeSource={RelativeSource AncestorType={x:Type ItemsControl}, Mode=FindAncestor}}"
                                                                                        CommandParameter="{Binding Mode=OneWay}"
                                                                                        Content="Button"
                                                                                        Grid.Column="1"
                                                                                        Style="{DynamicResource MonahrqDataGridDeleteButton}"
                                                                                        HorizontalAlignment="Center"
                                                                                        VerticalAlignment="Center"
                                                                                        Width="15"
                                                                                        Height="15"
                                                                                        Foreground="{DynamicResource MGrey5}" />
                                                                            </Grid>
                                                                        </DataTemplate>
                                                                    </ListView.ItemTemplate>
                                                                </ListView>
                                                            </Grid>
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </Grid>
                                        </Expander>

                                        <Expander Grid.Row="2"
                                                  Grid.Column="2"
                                                  x:Name="SeoAnalyticsAndMappingExpander"
                                                  Header="SEO, Analytics and Mapping"
                                                  d:LayoutOverrides="Width">
                                            <Grid Background="#FFE5E5E5">
                                                <Border BorderBrush="{DynamicResource MGrey2}"
                                                        BorderThickness="1"
                                                        Background="{DynamicResource MGrey1}"
                                                        Padding="5">
                                                    <Grid>
                                                        <StackPanel Orientation="Vertical">
                                                            <TextBlock x:Name="_lblWebsiteBrowserTitle"
                                                                       Text="Browser Title"
                                                                       Margin="5" />
                                                            <TextBox x:Name="txtbxWebsiteBrowserTitle"
                                                                     Background="{DynamicResource MGrey1}"
                                                                     FontSize="14"
                                                                     Foreground="{DynamicResource MGrey5}"
                                                                     Margin="5"
                                                                     Height="30"
                                                                     Style="{StaticResource StyleOverrideErrorTemplate}"
                                                                     HorizontalAlignment="Stretch">
                                                                <TextBox.Text>
                                                                    <Binding Path="CurrentWebsite.BrowserTitle"
                                                                             Mode="TwoWay"
                                                                             UpdateSourceTrigger="PropertyChanged"
                                                                             TargetNullValue="MONAHRQ Website"
                                                                             FallbackValue="MONAHRQ Website">
                                                                        <Binding.ValidationRules>
                                                                            <validation:StringRangeRule Min="1"
                                                                                                        PropertyName="Browser Title"
                                                                                                        MissingMsg="Please enter a browser title" />
                                                                        </Binding.ValidationRules>
                                                                    </Binding>
                                                                </TextBox.Text>
                                                            </TextBox>
                                                            <TextBlock FontStyle="Italic"
                                                                       TextWrapping="Wrap"
                                                                       Margin="5">
                                                                <TextBlock.Inlines>
                                                                    <Bold>Keywords:</Bold>
                                                                    <Span>Help search engines find your site (separate using commas).</Span>
                                                                </TextBlock.Inlines>
                                                            </TextBlock>
                                                            <TextBox x:Name="txtbxKeywords"
                                                                     Text="{Binding Path=CurrentWebsite.Keywords, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged }"
                                                                     MaxLines="20"
                                                                     AcceptsReturn="True"
                                                                     TextWrapping="Wrap"
                                                                     Height="100"
                                                                     Background="{DynamicResource MGrey1}"
                                                                     FontSize="14"
                                                                     Foreground="{DynamicResource MGrey5}"
                                                                     Margin="5"
                                                                     MaxLength="1000" />

                                                            <TextBlock FontStyle="Italic"
                                                                       TextWrapping="Wrap"
                                                                       Margin="5">
                                                                <TextBlock.Inlines>
                                                                    <Bold>Analytics:</Bold>
                                                                    <Span>If you have a Google Analytics account, enter your tracking ID.</Span>
                                                                </TextBlock.Inlines>
                                                            </TextBlock>
                                                            <TextBox x:Name="txtbxGATrackingId"
                                                                     Text="{Binding Path=CurrentWebsite.GoogleAnalyticsKey, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged }"
                                                                     Height="30"
                                                                     HorizontalAlignment="Stretch"
                                                                     Background="{DynamicResource MGrey1}"
                                                                     FontSize="14"
                                                                     Foreground="{DynamicResource MGrey5}"
                                                                     Margin="5"
                                                                     Controls:TextboxHelper.Watermark="GA Tracking ID"
                                                                     MaxLength="50" />
                                                            <TextBlock FontStyle="Italic"
                                                                       TextWrapping="Wrap"
                                                                       Margin="5">
                                                                <TextBlock.Inlines>
                                                                    <Bold>Google Maps APIs:</Bold>
                                                                    <Span>"If you have an API key provide it here. If left blank, a free version of the API key will be used."</Span>
                                                                </TextBlock.Inlines>
                                                            </TextBlock>
                                                            <TextBox Text="{Binding Path= CurrentWebsite.GoogleMapsApiKey, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged }"
                                                                     Margin="5"
                                                                     Height="30"
                                                                     HorizontalAlignment="Stretch"
                                                                     Background="{DynamicResource MGrey1}"
                                                                     FontSize="14"
                                                                     Foreground="{DynamicResource MGrey5}"
                                                                     Controls:TextboxHelper.Watermark="Google Maps API Key"
                                                                     MaxLength="50" />
                                                        </StackPanel>
                                                    </Grid>
                                                </Border>
                                            </Grid>
                                        </Expander>

                                    </StackPanel>
                                </Grid>
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </TabItem>
                <TabItem Header="Website Theme"
                         Name="Tab_WebsiteTheme"
                         Tag="{Binding WebsiteThemesHasErrors, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource TabItemStyleLeftValidation}">
                    <Border BorderBrush="{DynamicResource MBlue}"
                            BorderThickness="0,1,0,0"
                            Margin="-1,0,0,0"
                            Padding="0,10">
                        <Grid>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="Auto" />
                                <RowDefinition Height="0.069*" />
                            </Grid.RowDefinitions>
                            <StackPanel Grid.Row="0"
                                        Margin="0,0,-1,0"
                                        Background="{StaticResource MGrey2}">
                                <Label Style="{StaticResource StyleErrorLabel}"
                                       Content="{Binding ElementName=TextBoxHeaderTitle, Path=(Validation.Errors)[0].ErrorContent}" />
                                <Label Style="{StaticResource StyleErrorLabel}"
                                       Content="{Binding ElementName=TextBannerImage, Path=(Validation.Errors)[0].ErrorContent}" />
                            </StackPanel>

                            <Grid x:Name="top_header_panel_right"
                                  Grid.Row="1"
                                  ToolTip="Expand all available Options">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto" />
                                    <ColumnDefinition />
                                </Grid.ColumnDefinitions>

                                <StackPanel HorizontalAlignment="Left"
                                            Grid.Column="0"
                                            Margin="0,-1,0,0">
                                    <TextBlock TextWrapping="Wrap"
                                               Text="Website Theme"
                                               Style="{DynamicResource Header3}" />
                                    <TextBlock TextWrapping="Wrap"
                                               Text="Please specify what your website will look like. Click the subsections below to expand them for editing"
                                               Style="{DynamicResource Subtopic}" />
                                </StackPanel>

                                <StackPanel Grid.Column="1"
                                            Orientation="Vertical"
                                            VerticalAlignment="Center">
                                    <Button HorizontalAlignment="Right"
                                            Command="{Binding WebsitePreviewCommand}"
                                            Content="WEBSITE PREVIEW"
                                            Margin="0,5,5,5"
                                            Background="{StaticResource MBlue}"
                                            BorderBrush="{x:Null}"
                                            Width="120"
                                            Height="30"
                                            Foreground="White" />
                                    <Border VerticalAlignment="BOTTOM"
                                            HorizontalAlignment="Right"
                                            Padding="8"
                                            Background="{DynamicResource MGrey2}"
                                            BorderThickness="0"
                                            Margin="0,-1,0,0">
                                        <CheckBox x:Name="ChkExpandTheme"
                                                  FontSize="10"
                                                  Click="OnThemeExpandAllSelectionChanged"
                                                  Content="EXPAND ALL"
                                                  Foreground="{DynamicResource MGrey4}"
                                                  HorizontalAlignment="Left">
                                            <CheckBox.ToolTip>
                                                <TextBlock Style="{x:Null}"
                                                           Text="Checking this box causes all items in the details panel to be expanded. This box becomes unchecked if any of the child expanders are collapsed." />
                                            </CheckBox.ToolTip>
                                        </CheckBox>
                                    </Border>
                                </StackPanel>
                            </Grid>

                            <ScrollViewer Margin="5"
                                          Grid.Row="2">
                                <StackPanel>
                                    <Expander x:Name="SiteTheme"
                                              Header="Site Theme">
                                        <Grid Background="#FFE5E5E5">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="100" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <StackPanel Grid.Row="0"
                                                        Grid.ColumnSpan="2">
                                                <TextBlock Text="Header Title:"
                                                           Margin="5" />
                                                <TextBox Name="TextBoxHeaderTitle"
                                                         Style="{StaticResource StyleOverrideErrorTemplate}"
                                                         Text="{Binding CurrentWebsite.HeaderTitle, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                                         Background="{DynamicResource MGrey1}"
                                                         FontSize="14"
                                                         Foreground="{DynamicResource MGrey5}"
                                                         Margin="5"
                                                         Height="30"
                                                         HorizontalAlignment="Stretch"
                                                         Controls:TextboxHelper.Watermark="Enter the title of your website"
                                                         MaxLength="100" />
                                            </StackPanel>
                                            <StackPanel Grid.Row="1"
                                                        Grid.Column="0">
                                                <TextBlock Text="Select a color theme for your site: (Professional and Consumer)"
                                                           Margin="5" />
                                                <!--IsEnabled="{Binding CurrentWebsite.HasProfessionalsAudience, UpdateSourceTrigger=PropertyChanged}"-->
                                                <ComboBox x:Name="CbxSiteThemes"
                                                          ItemsSource="{Binding ApplicableSiteThemes}"
                                                          Background="{DynamicResource MGrey1}"
                                                          FontSize="14"
                                                          Foreground="{DynamicResource MGrey5}"
                                                          Margin="5"
                                                          Height="30"
                                                          HorizontalAlignment="Stretch"
                                                          IsSynchronizedWithCurrentItem="true"
                                                          SelectedValue="{Binding SelectedTheme, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, NotifyOnSourceUpdated=true}"
                                                          Controls:TextboxHelper.Watermark="Enter the title of your website" />
                                            </StackPanel>
                                            <Button Command="{Binding PreviewThemeCommand}"
                                                    IsEnabled="{Binding CurrentWebsite.HasProfessionalsAudience, UpdateSourceTrigger=PropertyChanged}"
                                                    CommandParameter="{Binding SelectedValue, ElementName=CbxSiteThemes}"
                                                    Grid.Row="1"
                                                    Grid.Column="1"
                                                    Foreground="White"
                                                    Background="{DynamicResource MBlue}"
                                                    BorderBrush="{x:Null}"
                                                    Padding="5,0,5,0"
                                                    Margin="0, 5, 5,5"
                                                    Width="80"
                                                    Height="30"
                                                    Content="PREVIEW"
                                                    VerticalAlignment="Bottom" />
                                        </Grid>
                                    </Expander>
                                    <Expander x:Name="AdvancedColorOptions"
                                              Header="Advanced Color Options">
                                        <Grid ScrollViewer.HorizontalScrollBarVisibility="Auto"
                                              ScrollViewer.VerticalScrollBarVisibility="Auto"
                                              ScrollViewer.CanContentScroll="True">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="auto" />
                                                <ColumnDefinition Width="*" />
                                            </Grid.ColumnDefinitions>
                                            <StackPanel Orientation="Vertical"
                                                        Grid.Column="0">
                                                <TextBlock Text="For expert users, you can specify your color scheme:"
                                                           Margin="5" />

                                                <Grid Background="#FFE5E5E5">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="auto" />
                                                        <ColumnDefinition Width="auto" />
                                                    </Grid.ColumnDefinitions>
                                                    <Grid.RowDefinitions>
                                                        <RowDefinition />
                                                        <RowDefinition />
                                                        <RowDefinition />
                                                    </Grid.RowDefinitions>

                                                    <StackPanel Grid.Row="1"
                                                                Grid.Column="0"
                                                                Margin="2, 2,10,2"
                                                                MinWidth="200"
                                                                MaxWidth="300"
                                                                HorizontalAlignment="Left"
                                                                Orientation="Vertical">
                                                        <TextBlock Text="Brand Colors:"
                                                                   HorizontalAlignment="left"
                                                                   Margin="5" />
                                                        <Grid>
                                                            <xctk:ColorPicker x:Name="clrPickerBrandColor"
                                                                              SelectedColor="{Binding BrandColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                              Height="30"
                                                                              Padding="0"
                                                                              ShowDropDownButton="False"
                                                                              FontSize="18" />
                                                            <Button Background="Transparent"
                                                                    Command="{Binding WarningButtonCommand}"
                                                                    Visibility="{Binding ShowWarningButtonOverlays, Mode=TwoWay, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                        </Grid>
                                                        <TextBlock Text="Background"
                                                                   FontStyle="Italic"
                                                                   Margin="5" />
                                                    </StackPanel>

                                                    <StackPanel Grid.Row="1"
                                                                Grid.Column="1"
                                                                Margin="10,2,2,2"
                                                                MinWidth="200"
                                                                MaxWidth="300"
                                                                HorizontalAlignment="Left"
                                                                Orientation="Vertical">
                                                        <TextBlock Text="Accent Colors:"
                                                                   HorizontalAlignment="left"
                                                                   Margin="5" />
                                                        <Grid>
                                                            <xctk:ColorPicker x:Name="clrPickerAccentColor"
                                                                              SelectedColor="{Binding AccentColor, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                                              Height="30"
                                                                              Padding="0"
                                                                              ShowDropDownButton="False"
                                                                              FontSize="18" />
                                                            <Button Background="Transparent"
                                                                    Command="{Binding WarningButtonCommand}"
                                                                    Visibility="{Binding ShowWarningButtonOverlays,Mode=TwoWay, Converter={StaticResource BooleanToVisibilityConverter}}" />
                                                        </Grid>
                                                        <TextBlock Text="Buttons"
                                                                   FontStyle="Italic"
                                                                   Margin="5" />
                                                    </StackPanel>
                                                </Grid>

                                                <TextBlock Grid.Row="2"
                                                           Grid.Column="0"
                                                           Text="What are Brand and Accent Colors?"
                                                           Margin="5"
                                                           HorizontalAlignment="Left"
                                                           MinWidth="250"
                                                           Foreground="Blue"
                                                           TextDecorations="Underline"
                                                           x:Name="txtDefinition">
                                                    <TextBlock.Style>
                                                        <Style>
                                                            <Style.Triggers>
                                                                <Trigger Property="UIElement.IsMouseOver"
                                                                         Value="True">
                                                                    <Trigger.Setters>
                                                                        <Setter Property="FrameworkElement.Cursor"
                                                                                Value="{x:Static Cursors.Hand}" />
                                                                    </Trigger.Setters>
                                                                </Trigger>
                                                                <Trigger Property="UIElement.IsMouseOver"
                                                                         Value="False">
                                                                    <Trigger.Setters>
                                                                        <Setter Property="FrameworkElement.Cursor"
                                                                                Value="{x:Static Cursors.Arrow}" />
                                                                    </Trigger.Setters>
                                                                </Trigger>
                                                            </Style.Triggers>
                                                        </Style>
                                                    </TextBlock.Style>
                                                    <i:Interaction.Triggers>
                                                        <i:EventTrigger EventName="MouseDown">
                                                            <i:InvokeCommandAction Command="{Binding AdvancedOptionsViewCommand}" />
                                                        </i:EventTrigger>
                                                    </i:Interaction.Triggers>
                                                </TextBlock>
                                            </StackPanel>
                                        </Grid>
                                    </Expander>
                                    <Expander x:Name="Font"
                                              Header="Font">
                                        <StackPanel Background="#FFE5E5E5">
                                            <TextBlock Text="Select a font family for your site:"
                                                       Margin="5" />
                                            <ComboBox ItemTemplate="{DynamicResource FontTemplate}"
                                                      Background="{DynamicResource MGrey1}"
                                                      SelectedValue="{Binding SelectedFont}"
                                                      SelectedValuePath="Value"
                                                      Height="30"
                                                      IsEnabled="{Binding CurrentWebsite.HasProfessionalsAudience, UpdateSourceTrigger=PropertyChanged}"
                                                      FontSize="14"
                                                      Foreground="{DynamicResource MGrey5}"
                                                      Margin="5"
                                                      HorizontalAlignment="Stretch">
                                                <ComboBox.Resources>
                                                    <Style x:Key="FontStyle">
                                                        <Setter Property="Control.FontFamily"
                                                                Value="{Binding Text, Converter={StaticResource TextToFontFamilyConverter}}" />
                                                        <Setter Property="Control.FontSize"
                                                                Value="14" />
                                                    </Style>
                                                    <DataTemplate x:Key="FontTemplate">
                                                        <StackPanel VirtualizingPanel.IsVirtualizing="True">
                                                            <TextBlock Style="{StaticResource FontStyle}"
                                                                       Text="{Binding Text}"
                                                                       ToolTip="{Binding Text}" />
                                                        </StackPanel>
                                                    </DataTemplate>

                                                    <CollectionViewSource x:Key="myFonts"
                                                                          Source="{Binding ApplicableSiteFonts}">
                                                        <CollectionViewSource.SortDescriptions>
                                                            <componentModel:SortDescription PropertyName="Source" />
                                                        </CollectionViewSource.SortDescriptions>
                                                    </CollectionViewSource>
                                                </ComboBox.Resources>
                                                <ComboBox.ItemsSource>
                                                    <Binding Source="{StaticResource myFonts}" />
                                                </ComboBox.ItemsSource>
                                            </ComboBox>

                                        </StackPanel>
                                    </Expander>
                                    <Expander x:Name="LogoAndImages"
                                              Header="Logo and Images">
                                        <Grid Background="#FFE5E5E5">
                                            <Grid.ColumnDefinitions>
                                                <ColumnDefinition Width="*" />
                                                <ColumnDefinition Width="100" />
                                            </Grid.ColumnDefinitions>
                                            <Grid.RowDefinitions>
                                                <RowDefinition />
                                                <RowDefinition />
                                                <RowDefinition />
                                            </Grid.RowDefinitions>
                                            <StackPanel Grid.Row="0"
                                                        Grid.Column="0"
                                                        Grid.RowSpan="2">
                                                <TextBlock Text="Website Logo Image:"
                                                           Margin="5"
                                                           HorizontalAlignment="Stretch" />
                                                <TextBox x:Name="TxtWebsiteLogoImage"
                                                         Height="30"
                                                         Text="{Binding LogoImage.ImagePath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         Controls:TextboxHelper.ClearTextButton="True"
                                                         Controls:TextboxHelper.Watermark="Select Your Website Logo Image"
                                                         Margin="5"
                                                         Width="Auto"
                                                         Background="{DynamicResource MGrey1}"
                                                         FontSize="14"
                                                         Foreground="{DynamicResource MGrey5}" />
                                            </StackPanel>

                                            <Button x:Name="BtnWebsiteLogoImagePreview"
                                                    Grid.Row="0"
                                                    Grid.Column="1"
                                                    Command="{Binding PreviewImageFileCommand}"
                                                    CommandParameter="LogoImage"
                                                    Foreground="White"
                                                    Background="{DynamicResource MBlue}"
                                                    BorderBrush="{x:Null}"
                                                    Padding="5,0,5,0"
                                                    Margin="0, 5, 5,5"
                                                    Width="80"
                                                    Content="PREVIEW"
                                                    Height="30"
                                                    VerticalAlignment="Top" />

                                            <Button Command="{Binding SelectImageFileCommand}"
                                                    Grid.Row="1"
                                                    Grid.Column="1"
                                                    CommandParameter="logo"
                                                    Foreground="White"
                                                    Background="{DynamicResource MBlue}"
                                                    BorderBrush="{x:Null}"
                                                    Padding="5,0,5,0"
                                                    Margin="0, 5, 5,5"
                                                    Width="80"
                                                    Content="BROWSE"
                                                    Height="30"
                                                    VerticalAlignment="Top" />

                                            <Grid Grid.Row="2"
                                                  Grid.Column="0"
                                                  Grid.ColumnSpan="2"
                                                  Margin="0,5,0,0">
                                                <Grid.RowDefinitions>
                                                    <RowDefinition />
                                                    <RowDefinition />
                                                </Grid.RowDefinitions>
                                                <Grid.ColumnDefinitions>
                                                    <ColumnDefinition Width="*" />
                                                    <ColumnDefinition Width="100" />
                                                </Grid.ColumnDefinitions>
                                                <StackPanel Grid.Row="0"
                                                            Grid.Column="0">
                                                    <TextBlock Margin="5"
                                                               HorizontalAlignment="Stretch"><Run Text="Website Banner Image" /><Run Text=" " /><Run Text=" - Recommended: Size - 1080x300 pixels"
                                                                                                                                                     FontSize="10" /></TextBlock>
                                                    <ComboBox Margin="5"
                                                              ItemsSource="{Binding AvailableBanners}"
                                                              SelectedItem="{Binding SelectedBanner, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                              DisplayMemberPath="Name" />
                                                </StackPanel>
                                                <Button x:Name="BtnBannerImagePreview"
                                                        Command="{Binding PreviewImageFileCommand}"
                                                        Grid.Row="0"
                                                        Grid.Column="1"
                                                        CommandParameter="BannerImage"
                                                        Foreground="White"
                                                        Background="{DynamicResource MBlue}"
                                                        BorderBrush="{x:Null}"
                                                        Padding="5,0,5,0"
                                                        Margin="0, 5, 5,5"
                                                        Width="80"
                                                        Content="PREVIEW"
                                                        Height="30"
                                                        VerticalAlignment="Center" />

                                                <TextBox x:Name="TextBannerImage"
                                                         Grid.Row="1"
                                                         Grid.Column="0"
                                                         DataContext="{Binding BannerImage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         Height="30"
                                                         Visibility="{Binding DataContext.IsUserSelectedBanner, Converter={StaticResource BooleanToVisibilityConverter}, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}"
                                                         Text="{Binding ImagePath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                                         Style="{StaticResource StyleOverrideErrorTemplate}"
                                                         Margin="5"
                                                         Width="Auto"
                                                         Background="{StaticResource MGrey1}"
                                                         FontSize="14"
                                                         Foreground="{DynamicResource MGrey5}" />
                                                <Button Command="{Binding SelectImageFileCommand}"
                                                        Grid.Column="1"
                                                        Grid.Row="1"
                                                        CommandParameter="banner"
                                                        Foreground="White"
                                                        Background="{DynamicResource MBlue}"
                                                        BorderBrush="{x:Null}"
                                                        Visibility="{Binding IsUserSelectedBanner, Converter={StaticResource BooleanToVisibilityConverter}}"
                                                        Padding="5,0,5,0"
                                                        Margin="0, 5, 5,5"
                                                        Content="BROWSE"
                                                        Width="80"
                                                        Height="30"
                                                        VerticalAlignment="Bottom" />
                                            </Grid>
                                        </Grid>
                                    </Expander>
                                </StackPanel>
                            </ScrollViewer>
                        </Grid>
                    </Border>
                </TabItem>
                <TabItem Header="Website Pages"
                         Name="Tab_WebsitePages"
                         Tag="{Binding WebsitePagesHasErrors, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource TabItemStyleLeftValidation}">
                    <Border BorderBrush="{DynamicResource MBlue}"
                            BorderThickness="0,1,0,0"
                            Margin="-1,0,0,0"
                            Padding="0,10">
                        <views:WebsitePagesView DataContext="{Binding WebsitePagesViewModel}" />
                    </Border>
                </TabItem>
                <TabItem Header="Website Menu"
                         Name="Tab_WebsiteMenu"
                         Tag="{Binding WebsiteMenuHasErrors, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged}"
                         Style="{StaticResource TabItemStyleLeftValidation}">
                    <Border BorderBrush="{DynamicResource MBlue}"
                            BorderThickness="0,1,0,0"
                            Margin="-1,0,0,0"
                            Padding="0,10">
                        <StackPanel x:Name="stkPanel">
                            <StackPanel.Resources>
                                <Style x:Key="lblStyle"
                                       TargetType="{x:Type Label}">
                                    <Setter Property="FontWeight"
                                            Value="SemiBold" />
                                    <Setter Property="FontSize"
                                            Value="15" />
                                </Style>
                            </StackPanel.Resources>
                            <Label Grid.Row="0"
                                   Content="Please provide a valid menu label (fewer than 30 characters)."
                                   Foreground="Red"
                                   FontSize="11"
                                   Visibility="{Binding WebsiteMenuHasErrors, Mode=TwoWay,  UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter}}" />

                            <Label Margin="15,0"
                                   FontStyle="Italic"
                                   Content="The text &quot;&lt;br&gt;&quot; in the menu and sub-menu name is used to display the menu text in two lines on the screen. Please use &quot;&lt;br&gt;&quot; if you need to display your menu item in multiple lines" />
                            <StackPanel Orientation="Horizontal"
                                        Grid.Row="1"
                                        Grid.Column="0"
                                        Grid.ColumnSpan="3"
                                        Margin="5,0">
                                <StackPanel Grid.Row="1"
                                            Grid.Column="0"
                                            Visibility="{Binding ProfessionalWebsiteMenuItems, Converter={StaticResource MenuGridVisibility}}"
                                            Width="{Binding ActualWidth, ElementName=stkPanel, Converter={StaticResource MenuGridWidth}}"
                                            Margin="10,0,10,0">
                                    <Label Style="{StaticResource lblStyle}"
                                           Content="Healthcare Professional" />

                                    <views:WebsiteMenuView DataContext="{Binding ProfessionalWebsiteMenuItems}"
                                                           ParentContainerWidth="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=StackPanel}, Path=ActualWidth}" />
                                </StackPanel>

                                <StackPanel Grid.Row="1"
                                            Grid.Column="2"
                                            Visibility="{Binding ConsumerWebsiteMenuItems, Converter={StaticResource MenuGridVisibility}}"
                                            Width="{Binding ActualWidth, ElementName=stkPanel, Converter={StaticResource MenuGridWidth}}"
                                            Margin="10,0,10,0">
                                    <Label Style="{StaticResource lblStyle}"
                                           Content="Consumer" />

                                    <views:WebsiteMenuView DataContext="{Binding ConsumerWebsiteMenuItems}"
                                                           ParentContainerWidth="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType=StackPanel}, Path=ActualWidth}" />
                                </StackPanel>
                            </StackPanel>
                        </StackPanel>
                    </Border>
                </TabItem>
            </TabControl>
        </Border>

        <!-- Popups-->
        <controls:xPopup x:Name="websitePreviewPopup"
                         Grid.Row="1"
                         Grid.Column="0"
                         VerticalAlignment="Center"
                         MinHeight="450"
                         MinWidth="550"
                         MaxHeight="500"
                         MaxWidth="900"
                         controls:xPopup.IsDraggable="False"
                         Visibility="{Binding IsWebsitePreviewOpen, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Border BorderThickness="1"
                    Margin="15,20,20,20"
                    MinHeight="450"
                    MinWidth="550"
                    MaxHeight="500"
                    MaxWidth="900"
                    BorderBrush="{StaticResource MGrey4}"
                    Background="{StaticResource MGrey2}"
                    Padding="1">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30" />
                        <RowDefinition Height="auto" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <DockPanel Grid.Column="0"
                               Background="{StaticResource MBlue}"
                               HorizontalAlignment="Stretch"
                               Cursor="Hand"
                               controls:xPopup.IsDraggable="False">
                        <TextBlock Style="{StaticResource Subtopic}"
                                   VerticalAlignment="Stretch"
                                   FontWeight="Bold"
                                   FontSize="15"
                                   Foreground="White"
                                   Margin="10,5,0,5"
                                   HorizontalAlignment="Left"
                                   DockPanel.Dock="Left">
                            <TextBlock.Text>
                                <MultiBinding StringFormat="WEBSITE PREVIEW: {0}">
                                    <Binding Path="ManageViewModel.WebsiteViewModel.DisplayName"
                                             Mode="OneWay" />
                                </MultiBinding>
                            </TextBlock.Text>
                        </TextBlock>
                        <Button DockPanel.Dock="Right"
                                HorizontalAlignment="Right"
                                Height="15"
                                Width="20"
                                Margin="0,5,5,5"
                                Grid.Column="1"
                                Command="{Binding CloseWebsitePreviewCommand}"
                                Content="X"
                                Style="{StaticResource CloseButton}"
                                Background="white" />
                    </DockPanel>
                    <Button Content="Preview in a browser"
                            Style="{StaticResource LinkButton}"
                            Grid.Row="1"
                            Margin="0,10"
                            HorizontalAlignment="Center"
                            Command="{Binding ViewWithBrowserCommand}" />
                    <WebBrowser Grid.Row="2"
                                ns:WebBrowserHelper.BindableSource="{Binding WebBrowserSourceUrl, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                MinHeight="300"
                                MaxHeight="400"
                                VerticalAlignment="Top" />
                </Grid>
            </Border>
        </controls:xPopup>

        <controls:xPopup x:Name="themePreviewPopup"
                         Grid.Row="1"
                         Grid.Column="0"
                         MinHeight="450"
                         MinWidth="550"
                         MaxHeight="500"
                         MaxWidth="900"
                         VerticalAlignment="Center"
                         Visibility="{Binding OpenThemePreviewPopup, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Border BorderThickness="1"
                    Margin="15,20,20,20"
                    MinHeight="450"
                    MinWidth="550"
                    MaxHeight="500"
                    MaxWidth="900"
                    BorderBrush="{StaticResource MGrey4}"
                    Background="{StaticResource MGrey2}"
                    Padding="1">
                <Grid HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <DockPanel Grid.Row="0"
                               Background="{StaticResource MBlue}"
                               HorizontalAlignment="Stretch"
                               Cursor="Hand"
                               controls:xPopup.IsDraggable="True">
                        <TextBlock Text="PREVIEW"
                                   FontWeight="Bold"
                                   FontSize="15"
                                   Foreground="White"
                                   Margin="10,5,0,5"
                                   HorizontalAlignment="Left"
                                   DockPanel.Dock="Left" />
                        <Button Command="{Binding CloseThemePreviewPopup}"
                                Content="X"
                                Style="{StaticResource CloseButton}"
                                DockPanel.Dock="Right"
                                HorizontalAlignment="Right"
                                Height="15"
                                Width="20"
                                Margin="0,5,5,5" />
                    </DockPanel>
                    <Image Grid.Row="1"
                           Source="{Binding ThemePreviewFilePath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                           Margin="10"
                           MinHeight="300"
                           MaxHeight="360"
                           VerticalAlignment="Top"
                           HorizontalAlignment="Stretch" />
                </Grid>
            </Border>

            <!--<Border BorderThickness="1" BorderBrush="{StaticResource MGrey4}" Background="white" Padding="1" Height="720" Width="900">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30"/>
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <DockPanel Grid.Row="0" Background="{StaticResource MBlue}" HorizontalAlignment="Stretch" Cursor="Hand" controls:xPopup.IsDraggable="True">
                        <TextBlock Text="PREVIEW" FontWeight="Bold" FontSize="15" Foreground="White" Margin="10,5,0,5" HorizontalAlignment="Left" DockPanel.Dock="Left" />
                        <Button  Command="{Binding CloseThemePreviewPopup}" Content="X" Style="{StaticResource CloseButton}" 
                                 DockPanel.Dock="Right" HorizontalAlignment="Right" Height="15" Width="20" Margin="0,5,5,5"/>
                    </DockPanel>
                    <Image Source="{Binding ThemePreviewFilePath, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
                           Grid.Row="1" Margin="2" VerticalAlignment="Stretch" HorizontalAlignment="Stretch"/>
                </Grid>
            </Border>-->
        </controls:xPopup>

        <controls:xPopup x:Name="hospitalSelectionPopup"
                         MinHeight="450"
                         MinWidth="550"
                         MaxHeight="500"
                         MaxWidth="900"
                         Grid.Row="1"
                         Grid.Column="0"
                         Visibility="{Binding ShowHospitalSelectionView, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, FallbackValue=Hidden, Converter={ StaticResource BooleanToVisibilityConverter}}">
            <Border BorderThickness="1"
                    Margin="15,5,5,20"
                    Padding="10"
                    Background="White"
                    MinHeight="450"
                    MinWidth="550"
                    MaxHeight="720"
                    MaxWidth="900"
                    BorderBrush="{DynamicResource MBlue}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <DockPanel Grid.Row="0"
                               Background="{StaticResource MBlue}"
                               HorizontalAlignment="Stretch"
                               Cursor="Hand"
                               controls:xPopup.IsDraggable="True">
                        <TextBlock Text="Included Hospitals"
                                   Style="{StaticResource Subtopic}"
                                   VerticalAlignment="Stretch"
                                   FontWeight="Bold"
                                   FontSize="15"
                                   Foreground="White"
                                   Margin="10,5,0,5"
                                   HorizontalAlignment="Left"
                                   DockPanel.Dock="Left" />
                        <Button DockPanel.Dock="Right"
                                HorizontalAlignment="Right"
                                Command="{Binding CloseHospitalSelectionPopup}"
                                Content="X"
                                Style="{StaticResource CloseButton}"
                                Height="15"
                                Width="20"
                                Margin="0,5,5,5" />
                    </DockPanel>
                    <views:WebsiteBuildReportsHospitalsView Grid.Row="1" />
                </Grid>
            </Border>
        </controls:xPopup>

        <controls:xPopup x:Name="nurinsgHomeSelectionPopup"
                         MinHeight="450"
                         MinWidth="550"
                         MaxHeight="500"
                         MaxWidth="900"
                         Grid.Row="1"
                         Grid.Column="0"
                         controls:xPopup.IsDraggable="true"
                         Visibility="{Binding ShowNursingSelectionView, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={ StaticResource BooleanToVisibilityConverter}}">
            <Border BorderThickness="1"
                    Margin="15,5, 5,20"
                    Padding="10"
                    Background="White"
                    MinHeight="450"
                    MinWidth="550"
                    MaxHeight="720"
                    MaxWidth="900"
                    BorderBrush="{DynamicResource MBlue}">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <DockPanel Grid.Column="0"
                               Background="{StaticResource MBlue}"
                               HorizontalAlignment="Stretch"
                               Cursor="Hand"
                               controls:xPopup.IsDraggable="False">
                        <TextBlock Text="Included Nursing Homes"
                                   Style="{StaticResource Subtopic}"
                                   VerticalAlignment="Stretch"
                                   FontWeight="Bold"
                                   FontSize="15"
                                   Foreground="White"
                                   Margin="10,5,0,5"
                                   HorizontalAlignment="Left"
                                   DockPanel.Dock="Left" />
                        <Button DockPanel.Dock="Right"
                                HorizontalAlignment="Right"
                                Height="15"
                                Width="20"
                                Margin="0,5,5,5"
                                CommandParameter="NursingHomeSelection"
                                Grid.Column="1"
                                Command="{Binding CloseHospitalSelectionCommand}"
                                Content="X"
                                Style="{StaticResource CloseButton}"
                                Background="white" />
                    </DockPanel>
                    <Grid Grid.Row="1">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="auto" />
                            <RowDefinition Height="*" />
                            <RowDefinition Height="50" />
                        </Grid.RowDefinitions>

                        <StackPanel Grid.Row="0"
                                    Margin="0,5,10,5"
                                    Orientation="Vertical"
                                    VerticalAlignment="Top">
                            <TextBlock Text="Included Nursing Homes:"
                                       Style="{StaticResource SectionHeader}"
                                       FontSize="18.667"
                                       FontWeight="Bold"
                                       Foreground="{StaticResource MGrey5}" />
                            <TextBlock Text="Select Nursing Homes to include in each report."
                                       Foreground="{StaticResource MGrey5}"
                                       FontFamily="Segoe UI"
                                       FontSize="10.667" />
                        </StackPanel>

                        <StackPanel Grid.Row="1"
                                    Margin="0,5,0,10"
                                    Orientation="Horizontal"
                                    VerticalAlignment="Bottom"
                                    HorizontalAlignment="Stretch">
                            <TextBlock Style="{StaticResource Subtopic}"
                                       Foreground="{StaticResource MGrey5}"
                                       Text="FILTER BY:"
                                       Margin="0,0,10,0"
                                       VerticalAlignment="Center" />
                            <ComboBox MinWidth="150"
                                      ItemsSource="{Binding NursingHomeFilterBy}"
                                      Width="250"
                                      SelectedValue="{Binding SelectedNursingHomeFilter}" />
                            <TextBlock Style="{StaticResource Subtopic}"
                                       Foreground="{StaticResource MGrey5}"
                                       Margin="10,0,10,0"
                                       VerticalAlignment="Center"
                                       Text="{Binding NursingHomeCollectionView.Count, StringFormat='# of Nursing Homes: {0}', FallbackValue='0'}" />
                        </StackPanel>

                        <!-- Data Grid for Nursing Homes-->
                        <DataGrid Grid.Row="2"
                                  VerticalScrollBarVisibility="Auto"
                                  VerticalAlignment="Top"
                                  ItemsSource="{Binding NursingHomeCollectionView}"
                                  BorderBrush="{StaticResource MGrey3}"
                                  HorizontalGridLinesBrush="{StaticResource MGrey2}"
                                  VerticalGridLinesBrush="{StaticResource MGrey2}"
                                  Foreground="{StaticResource MGrey5}"
                                  Background="{StaticResource White}"
                                  Margin="0,0,0,0"
                                  AutoGenerateColumns="False"
                                  CanUserAddRows="False"
                                  CanUserDeleteRows="False"
                                  ColumnHeaderHeight="40"
                                  CanUserResizeRows="False"
                                  HeadersVisibility="Column"
                                  AlternationCount="2"
                                  SelectionMode="Extended"
                                  SelectionUnit="CellOrRowHeader"
                                  multiSelect:MultiSelect.IsEnabled="True">
                            <DataGrid.Columns>
                                <DataGridTemplateColumn x:Name="columnCheckBox"
                                                        HeaderStyle="{StaticResource CheckBoxHeaderStyle}">
                                    <DataGridTemplateColumn.HeaderTemplate>
                                        <DataTemplate>
                                            <Border Width="30"
                                                    BorderThickness="0">
                                                <CheckBox  IsChecked="{Binding Path=DataContext.IsAllNursingHomesSelected, 
                                                                       RelativeSource={RelativeSource AncestorType={x:Type UserControl}}, 
                                                                       Mode=TwoWay}"
                                                          VerticalAlignment="Center"
                                                          HorizontalAlignment="Center"
                                                          Margin="4,0,0,0" />
                                            </Border>
                                           
                                        </DataTemplate>
                                    </DataGridTemplateColumn.HeaderTemplate>

                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate DataType="{x:Type DataGridCell}">
                                            <Border x:Name="brd"
                                                    Background="Transparent">
                                                <CheckBox  x:Name="SelectionNursingHomes"
                                                          VerticalAlignment="Center"
                                                          IsChecked="{Binding IsSelected, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                                                 </Border>
                                            <!--<DataTemplate.Triggers>
                                                <DataTrigger Binding="{Binding IsChecked, ElementName=SelectionNursingHomes}"
                                                             Value="False">
                                                    <Setter TargetName="SelectionNursingHomes"
                                                            Property="IsHitTestVisible"
                                                            Value="False" />
                                                    </DataTrigger>
                                                <DataTrigger Binding="{Binding IsChecked, ElementName=SelectionNursingHomes}"
                                                             Value="True">
                                                    <Setter TargetName="SelectionNursingHomes"
                                                            Property="IsHitTestVisible"
                                                            Value="True" />
                                                    </DataTrigger>
                                                </DataTemplate.Triggers>-->
                                           
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTemplateColumn Header="NURSING HOME NAME"
                                                        Width="0.25*"
                                                        CanUserSort="True"
                                                        SortMemberPath="Name">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock x:Name="txtName"
                                                       Margin="6"
                                                       TextWrapping="Wrap"
                                                       Text="{Binding Name}"
                                                       TextTrimming="CharacterEllipsis" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTemplateColumn Header="CITY"
                                                        Width="0.20*"
                                                        CanUserSort="True"
                                                        SortMemberPath="City">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding City}"
                                                       TextWrapping="Wrap" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTemplateColumn Header="STATE"
                                                        Width="0.15*"
                                                        CanUserSort="True"
                                                        SortMemberPath="State">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding State}"
                                                       TextWrapping="Wrap" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTemplateColumn Header="PHONE"
                                                        Width="0.20*"
                                                        CanUserSort="true"
                                                        SortMemberPath="Phone">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding Phone}"
                                                       TextWrapping="Wrap" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                                <DataGridTemplateColumn Header="CMS PROVIDER ID"
                                                        Width="0.25*"
                                                        CanUserSort="true"
                                                        SortMemberPath="ProviderId">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <TextBlock Text="{Binding ProviderId}"
                                                       TextWrapping="Wrap" />
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>

                            </DataGrid.Columns>
                        </DataGrid>

                        <StackPanel Grid.Row="3"
                                    Orientation="Horizontal"
                                    HorizontalAlignment="Center"
                                    Margin="0,0,0,0">
                            <Button Content="Cancel"
                                    HorizontalAlignment="Left"
                                    Margin="2,0,10,0"
                                    Width="150"
                                    Height="36"
                                    Style="{StaticResource PlainButton}"
                                    CommandParameter="NursingHomeSelection"
                                    Background="{StaticResource MPink}"
                                    BorderBrush="{x:Null}"
                                    VerticalAlignment="Center"
                                    Command="{Binding CloseHospitalSelectionCommand}" />
                            <Button Content="Done"
                                    HorizontalAlignment="Right"
                                    Margin="10,0,0,0"
                                    Width="150"
                                    Height="36"
                                    Style="{StaticResource PlainButton}"
                                    Background="{StaticResource MDBlue}"
                                    VerticalAlignment="Center"
                                    Foreground="White"
                                    FontSize="16"
                                    FontFamily="Segoe UI Semibold"
                                    Command="{Binding NursingHomeSelectionCompleteCommand}" />
                        </StackPanel>
                    </Grid>
                </Grid>
            </Border>
        </controls:xPopup>

        <controls:xPopup x:Name="PopupWebSiteLogoImage"
                         Grid.Row="1"
                         Grid.Column="0"
                         MinHeight="450"
                         MinWidth="550"
                         MaxHeight="500"
                         MaxWidth="900"
                         VerticalAlignment="Center"
                         Visibility="{Binding IsPreviewingLogoImage, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Border BorderThickness="1"
                    Margin="15,20,20,20"
                    MinHeight="450"
                    MinWidth="550"
                    MaxHeight="500"
                    MaxWidth="900"
                    BorderBrush="{StaticResource MGrey4}"
                    Background="{StaticResource MGrey2}"
                    Padding="1">
                <Grid HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <DockPanel Grid.Row="0"
                               Background="{StaticResource MBlue}"
                               HorizontalAlignment="Stretch"
                               Cursor="Hand"
                               controls:xPopup.IsDraggable="True">
                        <TextBlock Text="PREVIEW"
                                   FontWeight="Bold"
                                   FontSize="15"
                                   Foreground="White"
                                   Margin="10,5,0,5"
                                   HorizontalAlignment="Left"
                                   DockPanel.Dock="Left" />
                        <Button DockPanel.Dock="Right"
                                HorizontalAlignment="Right"
                                Command="{Binding ClosePreviewImageCommand}"
                                Content="X"
                                Style="{StaticResource CloseButton}"
                                Height="15"
                                Width="20"
                                Margin="0,5,5,5" />
                    </DockPanel>
                    <Image Grid.Row="1"
                           Margin="10"
                           Source="{Binding Text, ElementName=TxtWebsiteLogoImage}"
                           HorizontalAlignment="Stretch"
                           MinHeight="300"
                           MaxHeight="360"
                           VerticalAlignment="Stretch" />
                </Grid>
            </Border>
        </controls:xPopup>

        <controls:xPopup x:Name="PopupBannerImagePreview"
                         Grid.Row="1"
                         Grid.Column="0"
                         MinHeight="450"
                         MinWidth="550"
                         MaxHeight="500"
                         MaxWidth="900"
                         VerticalAlignment="Center"
                         Visibility="{Binding IsPreviewingBannerImage,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Border Margin="15,20,20,20"
                    MinHeight="450"
                    MinWidth="550"
                    MaxHeight="500"
                    MaxWidth="900"
                    BorderThickness="1"
                    BorderBrush="{StaticResource MGrey4}"
                    Background="{StaticResource MGrey2}"
                    Padding="1">
                <Grid HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <DockPanel Grid.Row="0"
                               Background="{StaticResource MBlue}"
                               HorizontalAlignment="Stretch"
                               Cursor="Hand"
                               controls:xPopup.IsDraggable="True">
                        <TextBlock Text="PREVIEW"
                                   FontWeight="Bold"
                                   FontSize="15"
                                   Foreground="White"
                                   Margin="10,5,0,5"
                                   HorizontalAlignment="Left"
                                   DockPanel.Dock="Left" />
                        <Button DockPanel.Dock="Right"
                                HorizontalAlignment="Right"
                                Height="15"
                                Width="20"
                                Margin="0,5,5,5"
                                Command="{Binding ClosePreviewImageCommand}"
                                Content="X"
                                Style="{StaticResource CloseButton}" />
                    </DockPanel>
                    <Image Grid.Row="1"
                           Source="{Binding Text, ElementName=TextBannerImage}"
                           Margin="10"
                           MinHeight="300"
                           MaxHeight="360"
                           VerticalAlignment="Stretch"
                           HorizontalAlignment="Stretch" />
                </Grid>
            </Border>
        </controls:xPopup>

        <controls:xPopup Name="popBrandColor"
                         Grid.Row="1"
                         Grid.Column="0"
                         MinHeight="450"
                         MinWidth="550"
                         MaxHeight="500"
                         MaxWidth="900"
                         VerticalAlignment="Center"
                         Visibility="{Binding IsAdvancedOptionsImageVisible,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource BooleanToVisibilityConverter}}">
            <Border Margin="15,20,20,20"
                    MinHeight="450"
                    MinWidth="550"
                    MaxHeight="500"
                    MaxWidth="900"
                    BorderThickness="1"
                    BorderBrush="{StaticResource MGrey4}"
                    Background="{StaticResource MGrey2}"
                    Padding="1">
                <Grid HorizontalAlignment="Stretch"
                      VerticalAlignment="Stretch">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="30" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <DockPanel Grid.Row="0"
                               Background="{StaticResource MBlue}"
                               HorizontalAlignment="Stretch"
                               Cursor="Hand"
                               controls:xPopup.IsDraggable="True">
                        <TextBlock Text="PREVIEW"
                                   FontWeight="Bold"
                                   FontSize="15"
                                   Foreground="White"
                                   Margin="10,5,0,5"
                                   HorizontalAlignment="Left"
                                   DockPanel.Dock="Left" />
                        <Button DockPanel.Dock="Right"
                                HorizontalAlignment="Right"
                                Height="15"
                                Width="20"
                                Margin="0,5,5,5"
                                Command="{Binding ClosePreviewImageCommand}"
                                Content="X"
                                Style="{StaticResource CloseButton}" />
                    </DockPanel>
                    <Image Grid.Row="1"
                           Margin="5"
                           MinWidth="450"
                           MinHeight="300"
                           MaxHeight="360"
                           VerticalAlignment="Stretch"
                           HorizontalAlignment="Stretch"
                           Source="/Monahrq.Websites;component/Resources/Brand_Accent_color.png" />
                </Grid>
            </Border>
        </controls:xPopup>
    </Grid>
</UserControl>